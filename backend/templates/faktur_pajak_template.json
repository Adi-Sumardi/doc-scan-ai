{
  "document_type": "faktur_pajak",
  "version": "2025-10-08",
  "description": "Structured Faktur Pajak schema for Smart Mapper. Values should be strings unless explicitly noted.",
  "sections": [
    {
      "name": "seller",
      "description": "Informasi penjual diminta pada faktur pajak.",
      "fields": [
        {"name": "name", "label": "Nama Penjual", "required": true, "notes": "Gunakan nama badan usaha resmi."},
        {"name": "npwp", "label": "NPWP Penjual", "required": true, "format": "NPWP"},
        {"name": "address", "label": "Alamat Penjual", "required": false}
      ]
    },
    {
      "name": "buyer",
      "description": "Informasi pembeli atau penerima BKP/JKP.",
      "fields": [
        {"name": "name", "label": "Nama Pembeli", "required": false},
        {"name": "npwp", "label": "NPWP Pembeli", "required": false, "format": "NPWP"},
        {"name": "address", "label": "Alamat Pembeli", "required": false},
        {"name": "email", "label": "Email Pembeli", "required": false, "notes": "Email pembeli BKP atau penerima JKP jika tersedia di dokumen"}
      ]
    },
    {
      "name": "invoice",
      "description": "Nomor dan tanggal faktur pajak.",
      "fields": [
        {"name": "number", "label": "Nomor Faktur Pajak", "required": true},
        {"name": "issue_date", "label": "Tanggal Faktur", "required": true, "format": "YYYY-MM-DD"},
        {"name": "reference", "label": "Nomor Invoice/Referensi", "required": false}
      ]
    },
    {
      "name": "financials",
      "description": "Ringkasan nilai transaksi. Extract dari tabel finansial di faktur pajak.",
      "fields": [
        {"name": "harga_jual", "label": "Harga Jual / Penggantian / Uang Muka / Termin", "required": false, "format": "currency", "notes": "Cari baris yang TEPAT dengan label 'Harga Jual / Penggantian / Uang Muka / Termin' diikuti nilai angka (Rp). Contoh: jika tertulis 'Harga Jual / Penggantian / Uang Muka / Termin 210.000.000,00' maka isi dengan '210000000'"},
        {"name": "uang_muka", "label": "Dikurangi Uang Muka yang telah diterima", "required": false, "format": "currency", "notes": "Cari baris yang TEPAT dengan label 'Dikurangi Uang Muka yang telah diterima' diikuti nilai angka (Rp). Contoh: jika tertulis 'Dikurangi Uang Muka yang telah diterima 63.000.000,00' maka isi dengan '63000000'. Jika baris ini tidak ada atau nilai 0, isi dengan '0'"},
        {"name": "dpp", "label": "Dasar Pengenaan Pajak", "required": true, "format": "currency", "notes": "Cari baris 'Dasar Pengenaan Pajak' diikuti nilai angka"},
        {"name": "ppn", "label": "PPN", "required": true, "format": "currency", "notes": "Cari baris 'Jumlah PPN' atau 'Jumlah PPN (Pajak Pertambahan Nilai)' diikuti nilai angka"},
        {"name": "pph", "label": "PPh", "required": false, "format": "currency"},
        {"name": "total", "label": "Total", "required": true, "format": "currency"}
      ]
    },
    {
      "name": "items",
      "description": "Daftar barang atau jasa pada faktur.",
      "fields": [
        {"name": "description", "label": "Deskripsi Barang/Jasa", "required": true},
        {"name": "quantity", "label": "Jumlah", "required": false},
        {"name": "unit_price", "label": "Harga Satuan", "required": false, "format": "currency"},
        {"name": "total_price", "label": "Subtotal", "required": false, "format": "currency"}
      ]
    }
  ],
  "output_schema": {
    "seller": {
      "name": "string",
      "npwp": "string",
      "address": "string"
    },
    "buyer": {
      "name": "string",
      "npwp": "string",
      "address": "string",
      "email": "string"
    },
    "invoice": {
      "number": "string",
      "issue_date": "string",
      "reference": "string"
    },
    "financials": {
      "harga_jual": "string",
      "uang_muka": "string",
      "dpp": "string",
      "ppn": "string",
      "pph": "string",
      "total": "string"
    },
    "items": [
      {
        "description": "string",
        "quantity": "string",
        "unit_price": "string",
        "total_price": "string"
      }
    ],
    "notes": "string",
    "confidence": "number"
  },
  "validation_rules": {
    "normalize_npwp": true,
    "currency_format": "Rp xxx.xxx",
    "allowed_date_formats": ["DD/MM/YYYY", "DD-MM-YYYY", "YYYY-MM-DD"]
  }
}
